# Error rate by space between races
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageError, linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0.1,0.2))
rm(list = ls())
library(tidyverse)
library(hrbrthemes)
## ------------------- import data --------------------##
setwd("C:/Users/Joshua Engels/Desktop/A-Voting-Folder/data")
votes <- read_delim("multi_layout_summary2.csv",col_names=TRUE, delim=",")
# maxY = 500
# votes = filter(votes, yPos < maxY)
## ------------------- add columns --------------------##
# Add a new binary column whether this race was skipped or not
votes$yesVoted <- votes$votedOn >= 0
## ------------------ calculate values to graph ------##
averageError = mean(votes$yesVoted)
# Eror rate by various spacing variables
raceSpaceError <- votes %>% group_by(raceSpace) %>% summarise(
percentVotedOn = mean(yesVoted)
)
titleSpaceError <- votes %>% group_by(titleSpace) %>% summarise(
percentVotedOn = mean(yesVoted)
)
candidateSpaceError <- votes %>% group_by(candidateSpace) %>% summarise(
percentVotedOn = mean(yesVoted)
)
# Error rate by column
columnError <- votes %>% group_by(column) %>% summarise(
percentVotedOn = mean(yesVoted)
)
# Error rate by y column bin
# yError <- votes %>% group_by(bins) %>% summarise(
#   percentVotedOn = mean(yesVoted))
# Error rate by size of race
raceLengthError <- votes %>% group_by(raceLength) %>% summarise(
percentVotedOn = mean(yesVoted))
## --------------------- show graphs -------------- ##
# Error rate by space between races
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageError, linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0.1,0.2))
# # Y position start frequency
# ggplot(votes, aes(bins * 10)) +
#   geom_bar(width = 8, fill="steelblue") +
#   theme_minimal() +
#   labs(title="Y Position Histogram",
#        x="Y Position (bin size = 10 pixels, from the top)",
#        y = "Number of Races")
# # Error rate by y position
# ggplot(
#   yError,
#   aes(x=bins * 10, y = 1 - percentVotedOn)) +
#   geom_bar(stat="identity", fill="steelblue", width=8) +
#   theme_minimal() +
#   labs(title="Voting Error by Y Position (pixels from screen top)",
#        x="Y Position",
#        y = "Percent Error")
#
# Error rate by column position
ggplot(
columnError,
aes(x=column, y = 1 - percentVotedOn)) +
geom_bar(stat="identity", fill="steelblue", width=0.8) +
theme_minimal() +
labs(title="Voting Error by Column",
x="Column Number",
y = "Percent Error")
# Error rate by race length
ggplot(raceLengthError, aes(x = raceLength, y = 100 * (1 - percentVotedOn))) +
geom_bar(stat = "identity", width = 0.75, fill="steelblue") +
theme_minimal() +
labs(title="Voting Error by Number of Candidates Per Race",
x="Number of Candidates Per Race",
y = "Percent Error")
# -------------- More interesting graphs
position_map <- function(binSize, maxY){
# Maybe excludes the lower part of the graph
votes$bins <- floor(votes$yPos / binSize)
newVotes = filter(votes, yPos < maxY)
maxBins <- max(votes$bins)
# By position on screen:
positionError <- newVotes %>%
group_by(bins, column) %>%
summarise(percentVotedOn = mean(yesVoted))
ggplot(positionError,
aes(x=column, y=(maxBins - bins) * binSize, fill=100 * (1 - percentVotedOn))) + geom_tile() +
scale_fill_distiller(palette = "Reds", name = "Percent Error", direction="horizontal") +
xlab("Column Number") +
ylab("Pixels from Bottom") +
ggtitle("Voting Error by Ballot Position") +
theme_ipsum()
}
position_map(10, 600)
position_map(10, 500)
# Error rate by space before
binSize = 5
votes$before_bins <- floor(votes$closest_before / binSize)
closestBeforeError <- filter(votes, before_bins >= 0) %>%
group_by(before_bins) %>% summarise(
totalVotedOn = sum(yesVoted),
totalNotVotedOn = n() - sum(yesVoted))
testtest <- melt(closestBeforeError, id=c("before_bins"))
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity")
test <- votes %>% group_by(before_bins) %>% tally()
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageError, linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0.1,0.2))
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageError, linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0.1,0.2))
raceSpaceError <- votes %>% group_by(raceSpace) %>% summarise(
percentVotedOn = mean(yesVoted)
)
votes
raceSpaceError
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal()
averageError = mean(votes$yesVoted)
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageError, linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0.1,0.2))
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error")
averageError
averageSuccess = mean(votes$yesVoted)
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageSuccess, linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0.1,0.2))
averageSuccess = mean(votes$yesVoted)
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=1 - averageSuccess, linetype="dashed", color = "red")
averageSuccess = mean(votes$yesVoted)
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=100 * (1 - averageSuccess), linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(0,30))
averageSuccess = mean(votes$yesVoted)
ggplot(
raceSpaceError,
aes(x=raceSpace, y=100 * (1 - percentVotedOn))) + geom_point() +
theme_minimal() +
labs(title="Voting Error by Space Between Races",
x="Pixels Between Races",
y = "Percent Error") +
geom_hline(yintercept=100 * (1 - averageSuccess), linetype="dashed", color = "red") +
geom_smooth(method='lm') +
coord_cartesian(ylim=c(10,20))
binSize = 5
votes$before_bins <- floor(votes$closest_before / binSize)
closestBeforeError <- filter(votes, before_bins >= 0) %>%
group_by(before_bins) %>% summarise(
totalVotedOn = sum(yesVoted),
totalNotVotedOn = n() - sum(yesVoted))
testtest <- melt(closestBeforeError, id=c("before_bins"))
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity")
library(melt)
library(melt2)
library(reshape2)
binSize = 5
votes$before_bins <- floor(votes$closest_before / binSize)
closestBeforeError <- filter(votes, before_bins >= 0) %>%
group_by(before_bins) %>% summarise(
totalVotedOn = sum(yesVoted),
totalNotVotedOn = n() - sum(yesVoted))
testtest <- melt(closestBeforeError, id=c("before_bins"))
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity")
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_manual(labels = c("Voted On", "Not Voted On"), values = c("blue", "red")) +
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_manual(labels = c("Voted On", "Not Voted On"), values = c("blue", "red"))
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_manual(labels = c("Voted On", "Not Voted On"), values = c("blue", "red"))
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_manual(labels = c("Voted On", "Not Voted On"), values = c("blue", "red")) +
guides(color=guide_legend("Legend"))  # add guide properties by aesthetic
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Errorr by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_manual(labels = c("Voted On", "Not Voted On"), values = c("blue", "red")) +
guides(color=guide_legend("Legend"))  # add guide properties by aesthetic
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_manual(labels = c("Voted On", "Not Voted On"), values = c("blue", "red")) +
guides(color=guide_legend("Legend"))  # add guide properties by aesthetic
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_hue(labels = c("Voted On", "Not Voted On")) +
guides(color=guide_legend("Legend"))  # add guide properties by aesthetic
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races",
fill = "Legend") +
scale_color_hue(labels = c("Voted On", "Not Voted On")) +
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races",
fill = "Legend") +
scale_color_hue(labels = c("Voted On", "Not Voted On"))
# By dif from race before
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_color_hue(labels = c("Voted On", "Not Voted On"))
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_x_discrete(limits=c("a", "b"))
# Stacked
ggplot(testtest, aes(fill=variable, y=value, x=before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_fill_discrete(name = "Dose", labels = c("A", "B", "C"))
ggplot(testtest, aes(fill=variable, y=value, x=binSize * before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance to closest race in prior column",
y = "Number of races") +
scale_fill_discrete(name = "Legend", labels = c("Voted On", "Not Voted On"))
ggplot(testtest, aes(fill=variable, y=value, x=binSize * before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Title Distance",
x="Y distance in pixels to closest race in prior column",
y = "Number of races") +
scale_fill_discrete(name = "Legend", labels = c("Voted On", "Not Voted On"))
ggplot(testtest, aes(fill=variable, y=value, x=binSize * before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Race Distance",
x="Y distance in pixels to closest race in prior column",
y = "Number of races") +
scale_fill_discrete(name = "Legend", labels = c("Voted On", "Not Voted On"))
ggplot(testtest, aes(fill=variable, y=value, x=binSize * before_bins)) +
geom_bar(position="stack", stat="identity") +
labs(title="Voting Error by Closest Race Distance",
x="Y distance in pixels to closest race in prior column",
y = "Number of races") +
scale_fill_discrete(name = "Legend", labels = c("Voted On", "Not Voted On"))
